<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geboorte Tracker 2026 - Smart Toggle</title>
    <style>
        :root {
            --bg-body: #121212; --bg-container: #1e1e1e;
            --text-main: #e0e0e0; --text-muted: #9e9e9e;
            --border: #333; --s-color: #3498db;
            --a-color: #2ecc71; --v-color: #f1c40f;
            --holiday: #e67e22; --deadline: #ff4757;
        }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg-body); color: var(--text-main); padding: 20px; }
        .container { max-width: 1200px; margin: auto; background: var(--bg-container); padding: 25px; border-radius: 16px; }
        
        .setup-row { display: flex; gap: 20px; margin-bottom: 20px; align-items: center; justify-content: center; background: #252525; padding: 15px; border-radius: 12px; border: 1px solid var(--border); }
        .setup-row input { background: #333; border: 1px solid #555; color: #fff; padding: 8px; border-radius: 5px; }

        .dashboard { display: flex; justify-content: space-around; background: #252525; padding: 15px; border-radius: 12px; margin-bottom: 20px; border: 1px solid var(--border); }
        .stat-box { text-align: center; flex: 1; border-right: 1px solid var(--border); }
        .stat-box:last-child { border-right: none; }
        .stat-box strong { font-size: 1.2em; display: block; color: #fff; }
        
        .controls { text-align: center; margin-bottom: 30px; display: flex; justify-content: center; gap: 8px; }
        .btn { padding: 10px 18px; border-radius: 8px; cursor: pointer; font-weight: bold; border: 1px solid var(--border); background: #2a2a2a; color: #fff; transition: 0.2s; }
        .btn.active[data-mode="s"] { background: var(--s-color); }
        .btn.active[data-mode="a"] { background: var(--a-color); }
        .btn.active[data-mode="v"] { background: var(--v-color); color: #000; }
        .btn-pdf { background: #fff !important; color: #000 !important; margin-left: 10px; }

        .months-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .month-card { background: #252525; border: 1px solid var(--border); padding: 15px; border-radius: 10px; }
        .calendar { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; }
        .day { aspect-ratio: 1/1; background: #2a2a2a; display: flex; align-items: center; justify-content: center; font-size: 0.8em; border-radius: 4px; cursor: pointer; position: relative; border: 1px solid transparent; }
        .day-label { font-size: 0.7em; text-align: center; color: var(--text-muted); padding-bottom: 5px; }
        .empty { visibility: hidden; }
        .no-click { cursor: default; background: #1a1a1a; color: #444; }
        .feestdag { color: var(--holiday); }
        .label { font-size: 7px; position: absolute; bottom: 2px; width: 100%; text-align: center; font-weight: bold; text-transform: uppercase; }
        
        .s-pick { background: var(--s-color) !important; color: white; }
        .a-pick { background: var(--a-color) !important; color: white; }
        .v-pick { background: var(--v-color) !important; color: black; }
        .past-deadline { border: 1.5px solid var(--deadline) !important; }

        @media print {
            .no-print { display: none !important; }
            body { background: white; color: black; }
            .container { background: white; }
            .dashboard { background: #eee; border: 1px solid #ccc; color: black; }
            .dashboard strong { color: black !important; }
            #print-report { display: block !important; }
        }
        #print-report { display: none; color: black; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    </style>
</head>
<body>

<div class="container">
    <h1 class="no-print">üë∂ Geboorte Tracker 2026</h1>
    
    <div class="setup-row no-print">
        <label>Geboortedatum baby: </label>
        <input type="date" id="birthdate" onchange="updateDeadline()">
        <span id="deadline-info" style="font-size: 0.85em; color: var(--deadline)"></span>
    </div>

    <div class="dashboard">
        <div class="stat-box"><span style="color:var(--s-color)">Standaard</span><strong id="s-hrs">0 / 32u</strong></div>
        <div class="stat-box"><span style="color:var(--a-color)">Aanvullend</span><strong id="a-hrs">0 / 160u</strong></div>
        <div class="stat-box"><span style="color:var(--v-color)">Vakantie Over</span><strong id="v-rem">104.75u</strong></div>
    </div>

    <div class="controls no-print">
        <button class="btn active" data-mode="s" onclick="setMode('s')">Standaard</button>
        <button class="btn" data-mode="a" onclick="setMode('a')">Aanvullend</button>
        <button class="btn" data-mode="v" onclick="setMode('v')">Vakantie</button>
        <button class="btn btn-pdf" onclick="window.print()">üñ®Ô∏è Exporteer PDF</button>
    </div>

    <div class="months-grid no-print" id="months-grid"></div>

    <div id="print-report">
        <h2>Offici√´le Verlofplanning 2026</h2>
        <div id="report-table-container"></div>
    </div>
</div>

<script>
    let currentMode = 's';
    let savedData = JSON.parse(localStorage.getItem('verlofData_2026_Smart')) || {};
    const startVakantieUren = 104.75;
    const months = ["Januari", "Februari", "Maart", "April", "Mei", "Juni", "Juli", "Augustus", "September", "Oktober", "November", "December"];
    const feestdagen = {"0-1":"Nieuwjaar","3-3":"Goede Vrijdag","3-5":"1e Paasdag","3-6":"2e Paasdag","3-27":"Koningsdag","4-4":"Bevrijdingsdag","4-14":"Hemelvaart","4-24":"1e Pinksteren","4-25":"2e Pinksteren","11-25":"1e Kerstdag","11-26":"2e Kerstdag"};

    function setMode(mode) {
        currentMode = mode;
        document.querySelectorAll('.btn').forEach(b => b.classList.remove('active'));
        document.querySelector(`.btn[data-mode="${mode}"]`).classList.add('active');
    }

    function updateDeadline() {
        const birthVal = document.getElementById('birthdate').value;
        if(!birthVal) return;
        
        const birthDate = new Date(birthVal);
        const deadlineDate = new Date(birthDate);
        deadlineDate.setDate(birthDate.getDate() + 182); // 26 weken
        
        document.getElementById('deadline-info').innerText = `Uiterste datum aanvullend verlof: ${deadlineDate.toLocaleDateString('nl-NL')}`;
        localStorage.setItem('birthDate_2026', birthVal);
        init(); // Refresh kalender voor de rode randjes
    }

    function init() {
        const grid = document.getElementById('months-grid');
        grid.innerHTML = '';
        const birthVal = localStorage.getItem('birthDate_2026');
        const deadlineDate = birthVal ? new Date(new Date(birthVal).getTime() + 182 * 24 * 60 * 60 * 1000) : null;

        for (let m = 0; m < 12; m++) {
            let mCard = document.createElement('div'); mCard.className = 'month-card';
            mCard.innerHTML = `<div style="font-weight:bold; margin-bottom:10px">${months[m]}</div>`;
            let cal = document.createElement('div'); cal.className = 'calendar';
            ["Ma","Di","Wo","Do","Vr","Za","Zo"].forEach(d => cal.innerHTML += `<div class="day-label">${d}</div>`);
            
            let shift = (new Date(2026, m, 1).getDay() + 6) % 7;
            for(let s=0; s<shift; s++) cal.innerHTML += `<div class="day empty"></div>`;
            
            let daysInMonth = new Date(2026, m + 1, 0).getDate();
            for(let d=1; d<=daysInMonth; d++) {
                let dayId = `${m}-${d}`; let date = new Date(2026, m, d);
                let dayEl = document.createElement('div'); dayEl.className = 'day'; dayEl.innerHTML = `<span>${d}</span>`;

                if(deadlineDate && date > deadlineDate) dayEl.classList.add('past-deadline');

                if (feestdagen[dayId]) { dayEl.classList.add('feestdag','no-click'); dayEl.innerHTML += `<span class="label">${feestdagen[dayId]}</span>`; }
                else if (date.getDay() === 5) { dayEl.classList.add('vrijdag','no-click'); dayEl.innerHTML += `<span class="label">Vrij</span>`; }
                else if (date.getDay() === 0 || date.getDay() === 6) { dayEl.classList.add('weekend','no-click'); }
                else {
                    if(savedData[dayId]) dayEl.classList.add(savedData[dayId] + '-pick');
                    dayEl.onclick = () => {
                        if (savedData[dayId] === currentMode) {
                            dayEl.classList.remove(currentMode + '-pick');
                            delete savedData[dayId];
                        } else {
                            dayEl.classList.remove('s-pick', 'a-pick', 'v-pick');
                            dayEl.classList.add(currentMode + '-pick');
                            savedData[dayId] = currentMode;
                        }
                        localStorage.setItem('verlofData_2026_Smart', JSON.stringify(savedData));
                        updateStats();
                    };
                }
                cal.appendChild(dayEl);
            }
            mCard.appendChild(cal); grid.appendChild(mCard);
        }
        updateStats();
    }

    function updateStats() {
        let s = 0, a = 0, v = 0;
        let tableHtml = '<table><tr><th>Datum</th><th>Type</th><th>Uren</th></tr>';
        let sortedKeys = Object.keys(savedData).sort((x,y) => {
            let [m1, d1] = x.split('-').map(Number); let [m2, d2] = y.split('-').map(Number);
            return new Date(2026, m1, d1) - new Date(2026, m2, d2);
        });

        sortedKeys.forEach(id => {
            let [m, d] = id.split('-'); let val = savedData[id];
            if(val === 's') s++; if(val === 'a') a++; if(val === 'v') v++;
            tableHtml += `<tr><td>${d} ${months[m]} 2026</td><td>${val==='s'?'Standaard':val==='a'?'Aanvullend':'Vakantie'}</td><td>8.00</td></tr>`;
        });

        document.getElementById('s-hrs').innerText = `${s * 8} / 32u`;
        document.getElementById('a-hrs').innerText = `${a * 8} / 160u`;
        document.getElementById('v-rem').innerText = `${(startVakantieUren - (v * 8)).toFixed(2)}u`;
        document.getElementById('report-table-container').innerHTML = tableHtml + '</table>';
    }

    window.onload = () => {
        const savedBirth = localStorage.getItem('birthDate_2026');
        if(savedBirth) {
            document.getElementById('birthdate').value = savedBirth;
            updateDeadline();
        }
        init();
    };
</script>
</body>
</html>

